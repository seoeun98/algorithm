# 비트마스킹 - 비트연산자

## 개요

### 정의

- 비트마스킹(bit masking): 컴퓨터는 내부적으로 모든 자료를 이진수로 표현. 이 특성을 이용해 정수의 이진수 표현을 자료구조로 쓰는 기법

### 비트연산자

- &
    - 비트 단위로 AND 연산
        
        ![그림1.png](%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%86%E1%85%A1%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B5%E1%86%BC%20-%20%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%209f690c9680b345a687ee250965ecc73b/%EA%B7%B8%EB%A6%BC1.png)
        
    - 특정 자리가 1인지 확인할 때 사용
    
    ```java
    if((bit & 1<<i) == 0) {
      // bit의 오른쪽에서부터 i+1번째 자리가 0인 경우
    }
    
    if((bit & 1<<i) != 0) {
      // bit의 오른쪽에서부터 i+1번째 자리가 1인 경우
    }
    ```
    
    - 특정 자리를 0으로 set할 때 사용 가능
    
    ```java
    // bit의 오른쪽에서부터 i+1번째 자리를 0으로 set
    bit &= ~(1<<i);
    ```
    
- |
    - 비트 단위로 OR 연산
        
        ![그림1.png](%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%86%E1%85%A1%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B5%E1%86%BC%20-%20%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%209f690c9680b345a687ee250965ecc73b/%EA%B7%B8%EB%A6%BC1%201.png)
        
    - 특정 자리를 1로 set할 때 사용
    
    ```java
    // bit의 오른쪽에서부터 i+1번째 자리를 1로 set
    bit |= 1<<i;
    ```
    
- ^
    - 비트 단위로 XOR 연산
        
        ![그림1.png](%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%86%E1%85%A1%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B5%E1%86%BC%20-%20%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%209f690c9680b345a687ee250965ecc73b/%EA%B7%B8%EB%A6%BC1%202.png)
        
    - 한 자리 수 비트를 반전할 때
    
    ```java
    // 0인 비트는 1로, 1인 비트는 0으로
    bit ^= 1;
    ```
    
    - temp 변수 없이 swap
    
    ```java
    a ^= b;
    b ^= a;
    a ^= b;
    ```
    
- ~
    - 모든 비트 반전
        
        ![그림1.png](%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%86%E1%85%A1%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B5%E1%86%BC%20-%20%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%209f690c9680b345a687ee250965ecc73b/%EA%B7%B8%EB%A6%BC1%203.png)
        
    - 단항 연산자
- <<
    - 피연산자의 비트 열을 왼쪽으로 이동
    - 빈자리는 0으로 채워짐
        
        ![그림1.png](%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%86%E1%85%A1%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B5%E1%86%BC%20-%20%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%209f690c9680b345a687ee250965ecc73b/%EA%B7%B8%EB%A6%BC1%204.png)
        
- >>
    - 피연산자의 비트 열을 오른쪽으로 이동
    - 빈자리는 피연산자의 최상위 부호비트로 채워짐
        
        ![그림1.png](%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%86%E1%85%A1%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B5%E1%86%BC%20-%20%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%209f690c9680b345a687ee250965ecc73b/%EA%B7%B8%EB%A6%BC1%205.png)
        
- >>>
    - 피연산자의 비트 열을 오른쪽으로 이동
    - 빈자리는 0으로 채워짐
        
        ![그림1.png](%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%86%E1%85%A1%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B5%E1%86%BC%20-%20%E1%84%87%E1%85%B5%E1%84%90%E1%85%B3%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%E1%84%8C%E1%85%A1%209f690c9680b345a687ee250965ecc73b/%EA%B7%B8%EB%A6%BC1%206.png)
        

## 활용

- 배열 대신 flag로 활용

```java
// boolean 배열 활용
// visited[i]가 false일 때
if(!visited[i]){
  // visited 체크
  visited[i] = true;
}

// 비트마스킹 활용
// bit의 i+1번째 비트가 0일 때
if((bit & 1<<i) == 0){
  // bit에 체크
  bit |= 1<<i;
}
```

- 바이너리 카운팅을 통해 부분집합 생성

```java
// arr[]: 부분집합 생성할 집합
// n: arr 배열 요소 수 (배열의 길이)

for(int i = 0; i < (1 << n); i++) {
  for(int j = 0; j < n; i++) {
    if((i & 1 << j) != 0) {
      System.out.print(arr[i]+" ");
    }
    System.out.println();
  }
}
```