# Deltas (4방/8방탐색)

## 개념 설명

- 2차원 배열을 탐색할 때, 코드의 양을 줄이고 가독성을 높이기 위해 사용하는 방법
- 현재 위치에서의 변화량을 의미하는 배열을 생성해서 반복문을 통해 탐색

## 예시

- 위치 x, y에서 8방으로의 변화량

![그림1.png](Deltas%20(4%E1%84%87%E1%85%A1%E1%86%BC%208%E1%84%87%E1%85%A1%E1%86%BC%E1%84%90%E1%85%A1%E1%86%B7%E1%84%89%E1%85%A2%E1%86%A8)%20180da7fc56824978a5fda1206152371f/%EA%B7%B8%EB%A6%BC1.png)

## 자바 코드

- 4방 탐색

```java
// 2차원 배열 형태
int[][] delta = {{-1, 0}, {1, 0}, {0, -1}, {0, 1}}; // 상 하 좌 우

// 1차원 배열 2개
int[] dr = {-1, 1, 0, 0};
int[] dc = {0, 0, -1, 1};

// 크기 NxN짜리 배열을 탐색한다고 가정
int[][] map = new int[N][N];

// ...

// 4방 탐색
for(int d = 0; d < 4; d++){
	int nx = x + dr[d]; // int nx = x + delta[d][0];
	int ny = y + dc[d]; // int ny = y + delta[d][1];
	
	// 범위 안에 존재하는지 확인
	if(nx >= 0 && nx < N && ny >= 0 && ny < N) {  }
}
```

- 8방 탐색

```java
// 2차원 배열 형태
int[][] delta = {{-1, -1}, {-1, 0}, {-1, 1}, {0, -1}, {0, 1}, {1, -1}, {1, 0}, {1, 1}};

// 1차원 배열 2개
int[] dr = {-1, -1, -1, 0, 0, 1, 1, 1};
int[] dc = {-1, 0, 1, -1, 1, -1, 0, 1};

// 크기 NxN짜리 배열을 탐색한다고 가정
int[][] map = new int[N][N];

// ...

// 8방 탐색
for(int d = 0; d < 8; d++){
	int nx = x + dr[d]; // int nx = x + delta[d][0];
	int ny = y + dc[d]; // int ny = y + delta[d][1];
	
	// 범위 안에 존재하는지 확인
	if(nx >= 0 && nx < N && ny >= 0 && ny < N) {  }
}
```

## 파생, 응용

- 4방/8방으로 여러 번 이동할 때 ex. 기지국
    - 방향 고정, 칸 탐색
        
        ```java
        for (int d = 0; d < 4; d++) {
        	// 시작점 초기화
        	nr = r;
        	nc = c;
        	
        	while(true) {
        		nr += delta[d][0];
        		nc += delta[d][1];
        		
        		// 범위 밖이라면 break
        		if(nr < 0 || nr >= N || nc < 0 || nc >= N) break;
        	}
        }
        ```
        
    - 칸 고정, 방향 탐색 (칸의 개수가 정해져 있을 때 사용하는 게 나을 듯하다)
        
        ```java
        int l = 1;
        while (true) {
        	// 기지국 유형만큼 칸 탐색
        	for (int d = 0; d < 4; d++) {
        		nr = r + l * dr[d];
        		nc = c + l * dc[d];
        
        		if(nr >= 0 && nr < N && nc >= 0 && nc < N) {
        			// 범위 내에 있을 때 처리
        		}
        	}
        	l++;
        }
        ```
        

- 3차원 배열에서의 6방 탐색 (동, 서, 남, 북, 위, 아래) ex. [토마토](https://www.acmicpc.net/problem/7569)

```java
int[][][] deltas = {{0, 1, 0}, {0, -1, 0}, {1, 0, 0}, {-1, 0, 0}, {0, 0, 1}, {0, 0, -1}};

int dx = {0, 0, 1, -1, 0, 0};
int dy = {1, -1, 0, 0, 0, 0};
int dz = {0, 0, 0, 0, 1, -1};
```

- 방향 배열의 인덱스를 모아 놓은 배열 ex. [감시](https://www.acmicpc.net/problem/15683)

```java
int[][] delta = {{-1, 0}, {1, 0}, {0, -1}, {0, 1}};

int[][][] dir = {
	{{0}, {1}, {2}, {3}}, // 1번 카메라가 회전했을 때 감시 가능한 방향들의 배열
	{{0, 2}, {1, 3}}, // 2번 카메라
	{{0, 1}, {1, 2}, {2, 3}, {3, 0}}, // 3번 카메라
	{{0, 1, 2}, {1, 2, 3}, {2, 3, 1}}, // 4번 카메라
	{{0, 1, 2, 3}} // 5번 카메라
};
```